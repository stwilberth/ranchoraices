---
import { languages, getLangFromUrl } from '../i18n.js';
import '../styles/global.css';
import ScrollToTop from '../components/ScrollToTop.astro';

const { url = Astro.url } = Astro.props;
const lang = getLangFromUrl(url);
const t = languages[lang];
const link_class = "hover:text-amber-400 transition";

const features = [
  {
    title: lang === 'es' ? 'Tours de Cacao y Chocolate' : 'Cacao & Chocolate Tours',
    description: lang === 'es' ? 'Del grano a la barra, vive el proceso artesanal de nuestro chocolate orgánico.' : 'From bean to bar, experience the artisanal process of our organic chocolate.',
    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-amber-900" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2z"/><path d="M15.5 8.5c-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5-1.1-2.5-2.5-2.5z"/><path d="M8.5 15.5c-1.4 0-2.5 1.1-2.5 2.5s1.1 2.5 2.5 2.5 2.5-1.1 2.5-2.5-1.1-2.5-2.5-2.5z"/><path d="M12 12l3.5-3.5"/><path d="M8.5 8.5L12 12"/></svg>`
  },
  {
    title: lang === 'es' ? 'Experiencias Sostenibles' : 'Sustainable Experiences',
    description: lang === 'es' ? 'Aprende sobre permacultura y nuestras prácticas de agricultura regenerativa.' : 'Learn about permaculture and our regenerative agriculture practices.',
    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-amber-900" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>`
  },
  {
    title: lang === 'es' ? 'Fauna y Flora Tropical' : 'Tropical Wildlife & Flora',
    description: lang === 'es' ? 'Descubre la increíble biodiversidad que nos rodea en la mágica Península de Osa.' : 'Discover the incredible biodiversity that surrounds us in the magical Osa Peninsula.',
    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-amber-900" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.5 17.5c3.3-3.3 3.3-8.7 0-12-3.3-3.3-8.7-3.3-12 0-3.3 3.3-3.3 8.7 0 12 3.3 3.3 8.7 3.3 12 0z"/><path d="M12 8v8"/><path d="M8 12h8"/></svg>`
  },
  {
    title: lang === 'es' ? 'Almuerzos y Catas' : 'Lunches & Tastings',
    description: lang === 'es' ? 'Disfruta de un almuerzo típico costarricense y catas de nuestro delicioso chocolate.' : 'Enjoy a traditional Costa Rican lunch and tastings of our delicious chocolate.',
    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-amber-900" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 21h20"/><path d="M3 17h18v-4a8 8 0 0 0-16 0v4z"/><path d="M12 4v2"/><path d="M12 11v6"/></svg>`
  }
];
---
<html lang={lang}>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{t.siteName}</title>
    <meta name="description" content={t.heroSubtitle} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  </head>
  <body class="bg-amber-50 text-gray-900 min-h-screen flex flex-col">
    <header class="w-full py-4 px-6 flex items-center justify-between bg-gradient-to-r from-cacao to-chocolate text-amber-50 shadow-xl top-0 z-50  bg-opacity-90 backdrop-blur-sm">
      <div class="text-2xl font-display tracking-wide">
        <a href={lang === 'es' ? '/' : '/en/'}>{t.siteName}</a>
      </div>
      
      <button id="menu-btn" class="md:hidden block text-amber-50 hover:text-amber-400 focus:outline-none z-50 transition-transform hover:scale-110" aria-label="Menu">
        <svg id="menu-icon" class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
        <svg id="close-icon" class="w-8 h-8 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>

      <!-- Desktop Menu -->
      <nav class="hidden md:flex items-center gap-6 text-lg">
        <a href={lang === 'es' ? '/' : '/en/'} class={link_class}>{t.home}</a>
        <a href={lang === 'es' ? '/tours' : '/en/tours'} class={link_class}>{t.tours}</a>
        <a href={lang === 'es' ? '/about' : '/en/about'} class={link_class}>{t.about}</a>
        <a href={lang === 'es' ? '/gallery' : '/en/gallery'} class={link_class}>{t.gallery}</a>
        <a href={lang === 'es' ? '/contact' : '/en/contact'} class={link_class}>{t.contact}</a>
        <a href={lang === 'es' ? '/en' : '/'} class="ml-4 px-3 py-1 rounded bg-amber-400 text-amber-900 font-semibold hover:bg-green-600 hover:text-white transition">{t.switchLang}</a>
      </nav>
    </header>

    <!-- Mobile Menu -->
    <div id="mobile-menu" class="fixed inset-0 bg-black/30 backdrop-blur-sm z-40 opacity-0 pointer-events-none transition-opacity duration-300">
      <div class="fixed bottom-0 left-0 right-0 bg-amber-900/95 rounded-t-3xl p-6 transform translate-y-full transition-transform duration-300 ease-in-out">
        <div class="flex justify-end mb-4">
          <button id="close-menu-btn" class="text-amber-50 hover:text-amber-300 transition-colors p-2">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <div class="flex flex-col items-center">
        <nav class="flex flex-col items-center space-y-6 w-full max-w-xs">
          <a href={lang === 'es' ? '/' : '/en/'} class="text-2xl text-amber-50 hover:text-amber-300 transition-colors py-3 w-full text-center border-b border-amber-800">{t.home}</a>
          <a href={lang === 'es' ? '/tours' : '/en/tours'} class="text-2xl text-amber-50 hover:text-amber-300 transition-colors py-3 w-full text-center border-b border-amber-800">{t.tours}</a>
          <a href={lang === 'es' ? '/about' : '/en/about'} class="text-2xl text-amber-50 hover:text-amber-300 transition-colors py-3 w-full text-center border-b border-amber-800">{t.about}</a>
          <a href={lang === 'es' ? '/gallery' : '/en/gallery'} class="text-2xl text-amber-50 hover:text-amber-300 transition-colors py-3 w-full text-center border-b border-amber-800">{t.gallery}</a>
          <a href={lang === 'es' ? '/contact' : '/en/contact'} class="text-2xl text-amber-50 hover:text-amber-300 transition-colors py-3 w-full text-center border-b border-amber-800">{t.contact}</a>
          <a href={lang === 'es' ? '/en' : '/'} class="mt-8 px-6 py-3 rounded-full bg-amber-400 text-amber-900 font-bold text-lg hover:bg-green-600 hover:text-white transition-all transform hover:scale-105 w-full text-center">
            {t.switchLang}
          </a>
          </nav>
        </div>
      </div>
    </div>

    <main class="flex-1 flex flex-col">
      <section 
        class="relative flex flex-col items-center justify-center min-h-screen text-center bg-cover bg-center -mt-20 pt-16"
        style="background-image: url('/images/gallery/56.jpg');"
      >
        <div class="absolute inset-0 bg-black/60"></div>
        <div class="absolute inset-0 bg-green-600 opacity-10 pointer-events-none" style="background-image: url('/leaves-bg.svg'); background-repeat: repeat;"></div>
        <div class="relative z-10 px-4 md:px-0">
          <h1 class="font-display text-4xl md:text-6xl text-white font-bold drop-shadow-lg mb-6 animate-fade-in">
            {t.heroTitle}
          </h1>
          <p class="text-xl md:text-2xl text-amber-50 max-w-3xl mx-auto mb-8 animate-fade-in delay-200">
            {t.heroSubtitle}
          </p>
          <a href={lang === 'es' ? '/tours' : '/en/tours'} class="inline-block px-8 py-4 rounded-lg bg-amber-400 text-amber-900 font-bold text-lg shadow-lg hover:bg-green-600 hover:text-white transition-transform hover:scale-105 animate-fade-in delay-400">
            {t.cta}
          </a>
        </div>
      </section>

      <section class="py-20 px-4 bg-amber-50">
        <div class="max-w-5xl mx-auto text-center">
          <h2 class="font-display text-3xl md:text-4xl text-amber-900 mb-4">{lang === 'es' ? 'Una Experiencia Inolvidable' : 'An Unforgettable Experience'}</h2>
          <p class="text-lg text-gray-700 mb-12 max-w-3xl mx-auto">
            {lang === 'es'
              ? 'Un lugar donde el chocolate orgánico, la naturaleza y la cultura costarricense se unen. Descubre nuestros tours, aprende sobre permacultura y vive la magia de la Península de Osa.'
              : 'A place where organic chocolate, nature, and Costa Rican culture come together. Discover our tours, learn about permaculture, and experience the magic of the Osa Peninsula.'}
          </p>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            {features.map(feature => (
              <div class="bg-white p-6 rounded-lg shadow-lg text-center flex flex-col items-center transform hover:-translate-y-2 transition-transform duration-300">
                <div class="mb-4" set:html={feature.icon} />
                <h3 class="font-display text-xl text-amber-900 mb-2">{feature.title}</h3>
                <p class="text-gray-600 text-base">{feature.description}</p>
              </div>
            ))}
          </div>
        </div>
      </section>
    </main>
    <ScrollToTop />
    <footer class="w-full bg-amber-900 text-amber-50 py-6 px-6 mt-10 flex flex-col md:flex-row items-center justify-between text-sm">
      <div>© {new Date().getFullYear()} Rancho Raíces. {lang === 'es' ? 'Todos los derechos reservados.' : 'All rights reserved.'}</div>
      <div>
        Puerto Jiménez, Península de Osa, Costa Rica
      </div>
    </footer>

    <script>
      const menuBtn = document.getElementById('menu-btn');
      const closeMenuBtn = document.getElementById('close-menu-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      const mobileMenuContent = mobileMenu?.querySelector('div > div');
      const menuIcon = document.getElementById('menu-icon');
      const closeIcon = document.getElementById('close-icon');
      let isOpen = false;

      function openMenu() {
        if (!isOpen) {
          mobileMenu.classList.remove('opacity-0', 'pointer-events-none');
          mobileMenuContent.classList.remove('translate-y-full');
          document.body.style.overflow = 'hidden';
          menuIcon.classList.add('hidden');
          closeIcon.classList.remove('hidden');
          isOpen = true;
        }
      }

      function closeMenu() {
        if (isOpen) {
          mobileMenuContent.classList.add('translate-y-full');
          mobileMenu.classList.add('opacity-0', 'pointer-events-none');
          document.body.style.overflow = '';
          menuIcon.classList.remove('hidden');
          closeIcon.classList.add('hidden');
          isOpen = false;
        }
      }

      function toggleMenu() {
        if (isOpen) closeMenu();
        else openMenu();
      }

      // Event Listeners
      menuBtn?.addEventListener('click', toggleMenu);
      closeMenuBtn?.addEventListener('click', closeMenu);

      // Cerrar al hacer clic fuera del menú
      mobileMenu?.addEventListener('click', (e) => {
        if (e.target === mobileMenu) closeMenu();
      });

      // Cerrar menú al hacer clic en un enlace
      document.querySelectorAll('#mobile-menu nav a').forEach(link => {
        link.addEventListener('click', closeMenu);
      });

      // Cerrar con tecla Escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && isOpen) closeMenu();
      });
    </script>
  </body>
</html>